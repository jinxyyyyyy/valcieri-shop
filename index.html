<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VALCIERI</title>

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff}
header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#000;position:sticky;top:0;z-index:1000}
.logo{font-size:22px;font-weight:bold}
nav{display:flex;gap:10px;flex-wrap:wrap}
button{cursor:pointer}
.primary{background:#fff;color:#000;border:none;padding:8px 12px}
.secondary{background:#333;color:#fff;border:1px solid #555;padding:8px 12px}
.hidden{display:none}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;padding:20px}
.product{background:#1c1c1c;padding:15px;border-radius:8px;text-align:center}
input,select{padding:6px;margin-top:5px}
.cart{padding:20px;background:#000}
.page{padding:20px}
.mobile-toggle{display:none}
@media(max-width:768px){
nav{display:none;flex-direction:column;background:#000;position:absolute;top:60px;left:0;width:100%;padding:15px}
nav.show{display:flex}
.mobile-toggle{display:block;background:#fff;color:#000;border:none;padding:6px 10px}
}
</style>
</head>
<body>

<header>
<div class="logo">VALCIERI</div>

<button class="mobile-toggle" onclick="toggleMenu()">☰</button>

<nav id="navLinks"></nav>

<div>
<button onclick="setLanguage('fi')" class="secondary">FI</button>
<button onclick="setLanguage('en')" class="secondary">EN</button>
<button onclick="checkAdminAccess()" class="secondary">Admin</button>
</div>
</header>

<main>

<div id="storePage" class="page">
<div class="products" id="productsContainer"></div>
</div>

<div id="checkoutPage" class="page hidden">
<h2>Checkout</h2>
<div id="checkoutItems"></div>
<h3 id="checkoutTotal"></h3>
<button class="primary" onclick="placeOrder()">Place Order</button>
</div>

<div id="confirmationPage" class="page hidden">
<h2>Order Confirmed ✅</h2>
<p>Thank you for shopping with VALCIERI.</p>
<button class="primary" onclick="showPage('storePage')">Back to Store</button>
</div>

<div id="loginPage" class="page hidden">
<h2>Admin Login</h2>
<input id="loginUser" placeholder="Username"><br><br>
<input id="loginPass" type="password" placeholder="Password"><br><br>
<button class="primary" onclick="loginAdmin()">Login</button>
</div>

<div id="adminPage" class="page hidden">
<h2>Admin Dashboard</h2>
<input id="adminName" placeholder="Product Name"><br><br>
<input id="adminPrice" type="number" placeholder="Price"><br><br>
<select id="adminCategory">
<option value="tshirt">T-Shirt</option>
<option value="hoodie">Hoodie</option>
<option value="tracksuit">Tracksuit</option>
<option value="shoes">Shoes</option>
<option value="belts">Belts</option>
<option value="glasses">Glasses</option>
<option value="fragrance">Men's Fragrance</option>
<option value="jewelry">Jewelry</option>
</select><br><br>
<button class="primary" onclick="addProduct()">Add Product</button>
<button class="secondary" onclick="logoutAdmin()">Logout</button>
</div>

<div class="cart">
<h3>Cart</h3>
<div id="cartContainer"></div>
<h4 id="cartTotal"></h4>
<button class="primary" onclick="goCheckout()">Checkout</button>
</div>

</main>

<script>
let currentLang="fi";
let cart=JSON.parse(localStorage.getItem("cart"))||[];
let products=JSON.parse(localStorage.getItem("products"))||[
{id:1,name:"VALCIERI T-Shirt",price:29,category:"tshirt",created:Date.now()},
{id:2,name:"VALCIERI Hoodie",price:79,category:"hoodie",created:Date.now()},
{id:3,name:"VALCIERI Tracksuit",price:149,category:"tracksuit",created:Date.now()},
{id:4,name:"VALCIERI Shoes",price:99,category:"shoes",created:Date.now()},
{id:5,name:"VALCIERI Belt",price:45,category:"belts",created:Date.now()},
{id:6,name:"VALCIERI Glasses",price:60,category:"glasses",created:Date.now()},
{id:7,name:"VALCIERI Men's Fragrance",price:95,category:"fragrance",created:Date.now()},
{id:8,name:"VALCIERI Jewelry",price:120,category:"jewelry",created:Date.now()}
];

let selectedCategory="all";
let maxPrice=300;
let searchQuery="";
let sortOption="newest";

const translations={
fi:{
add:"Lisää koriin",
search:"Hae tuotteita...",
categories:{
all:"Kaikki",tshirt:"T-Paidat",hoodie:"Hupparit",tracksuit:"Tracksuitit",
shoes:"Kengät",belts:"Vyöt",glasses:"Lasit",fragrance:"Miesten tuoksut",jewelry:"Korut"
}},
en:{
add:"Add to Cart",
search:"Search products...",
categories:{
all:"All",tshirt:"T-Shirts",hoodie:"Hoodies",tracksuit:"Tracksuits",
shoes:"Shoes",belts:"Belts",glasses:"Glasses",fragrance:"Men's Fragrance",jewelry:"Jewelry"
}}
};

const ADMIN_USERNAME="admin";
const ADMIN_PASSWORD="valcieri2026";

function toggleMenu(){
document.getElementById("navLinks").classList.toggle("show");
}

function renderNav(){
let nav=document.getElementById("navLinks");
nav.innerHTML="";
for(let key in translations[currentLang].categories){
let btn=document.createElement("button");
btn.className="secondary";
btn.textContent=translations[currentLang].categories[key];
btn.onclick=()=>{selectedCategory=key;renderProducts();}
nav.appendChild(btn);
}
}

function renderProducts(){
let container=document.getElementById("productsContainer");
container.innerHTML=`
<div style="grid-column:1/-1;display:flex;gap:15px;flex-wrap:wrap;margin-bottom:20px;">
<input placeholder="${translations[currentLang].search}" oninput="handleSearch(this.value)">
<input type="range" min="0" max="300" value="${maxPrice}" oninput="handlePrice(this.value)">
<select onchange="handleSort(this.value)">
<option value="newest">Newest</option>
<option value="low">Price ↑</option>
<option value="high">Price ↓</option>
</select>
</div>`;

let filtered=products.filter(p=>{
return (selectedCategory==="all"||p.category===selectedCategory)
&& p.price<=maxPrice
&& p.name.toLowerCase().includes(searchQuery.toLowerCase());
});

if(sortOption==="low")filtered.sort((a,b)=>a.price-b.price);
else if(sortOption==="high")filtered.sort((a,b)=>b.price-a.price);
else filtered.sort((a,b)=>b.created-a.created);

filtered.forEach(p=>{
container.innerHTML+=`
<div class="product">
<h3>${p.name}</h3>
<p>€${p.price}</p>
<select id="size-${p.id}">
<option>S</option><option>M</option><option>L</option><option>XL</option>
</select><br><br>
<button class="primary" onclick="addToCart(${p.id})">${translations[currentLang].add}</button>
</div>`;
});
}

function handleSearch(v){searchQuery=v;renderProducts();}
function handlePrice(v){maxPrice=v;renderProducts();}
function handleSort(v){sortOption=v;renderProducts();}

function addToCart(id){
let product=products.find(p=>p.id===id);
let size=document.getElementById("size-"+id).value;
let existing=cart.find(i=>i.id===id&&i.size===size);
if(existing)existing.qty++;
else cart.push({...product,size,qty:1});
renderCart();
}

function renderCart(){
let c=document.getElementById("cartContainer");
c.innerHTML="";
let total=0;
cart.forEach(i=>{
total+=i.price*i.qty;
c.innerHTML+=`<div>${i.name} (${i.size}) x${i.qty}</div>`;
});
document.getElementById("cartTotal").innerText="Total: €"+total.toFixed(2);
localStorage.setItem("cart",JSON.stringify(cart));
}

function goCheckout(){
showPage("checkoutPage");
let items=document.getElementById("checkoutItems");
let total=0;
items.innerHTML="";
cart.forEach(i=>{
total+=i.price*i.qty;
items.innerHTML+=`<div>${i.name} (${i.size}) x${i.qty}</div>`;
});
document.getElementById("checkoutTotal").innerText="Total: €"+total.toFixed(2);
}

function placeOrder(){
cart=[];
localStorage.setItem("cart","[]");
renderCart();
showPage("confirmationPage");
}

function addProduct(){
let name=document.getElementById("adminName").value;
let price=parseFloat(document.getElementById("adminPrice").value);
let category=document.getElementById("adminCategory").value;
products.push({id:Date.now(),name,price,category,created:Date.now()});
localStorage.setItem("products",JSON.stringify(products));
renderProducts();
}

function loginAdmin(){
let u=document.getElementById("loginUser").value;
let p=document.getElementById("loginPass").value;
if(u===ADMIN_USERNAME&&p===ADMIN_PASSWORD){
sessionStorage.setItem("adminAuth","true");
showPage("adminPage");
}else alert("Wrong login");
}

function logoutAdmin(){
sessionStorage.removeItem("adminAuth");
showPage("storePage");
}

function checkAdminAccess(){
if(sessionStorage.getItem("adminAuth")==="true")showPage("adminPage");
else showPage("loginPage");
}

function showPage(id){
["storePage","checkoutPage","confirmationPage","adminPage","loginPage"]
.forEach(p=>document.getElementById(p).classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function setLanguage(lang){
currentLang=lang;
renderNav();
renderProducts();
}

renderNav();
renderProducts();
renderCart();
</script>

</body>
</html>
